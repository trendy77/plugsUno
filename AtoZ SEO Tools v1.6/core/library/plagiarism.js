function phraseMe(e,t){for(var r=e.charAt(t),n=t,a=0;n>=0&&a<minLimit&&!(" "==e.charAt(n)&&a>12);)n--,r=e.charAt(n)+r,a++;for(var n=t,a=0;n<e.length&&60>a&&!(" "==e.charAt(n)&&a>40);)n++,r+=e.charAt(n),a++;return r}function parseArticle(e){var t=new Array,r=e.split("\n");for(i=0;i<r.length;i++){var n=r[i];if(-1==n.indexOf(".")&&-1==n.indexOf(",")||n.indexOf(".")==n.length-1||n.indexOf(",")==n.length-1){if(n.length>=40){for(var a="",c=0;60>c&&!(" "==n.charAt(c)&&c>45);)a+=n.charAt(c),c++;t.push(a)}}else{var o=0;for(j=0;j<n.length;j++)("."==n.charAt(j)||","==n.charAt(j)||"?"==n.charAt(j))&&j<n.length-5&&j-minLimit>o&&(o=j,t.push(phraseMe(n,j)))}}return t}function unique2Color(e){return 100>e?"#e74c3c":"#2ecc71"}function checkMe(e,t,r){jQuery.post("../?route=ajax",{plagiarism:"1",type:apiType,data:t[r]},function(n){var a=r+1;"2"==n?(checkOK++,jQuery("#resultList").append("<tr><td>"+a+'</td><td class="string">'+t[r]+'</td><td><span class="badge bg-green"> Good </span></td></tr>')):jQuery("#resultList").append("<tr><td>"+a+'</td><td class="string">'+t[r]+'</td><td><span class="badge bg-red"> Already Exists </span></td></tr>');var c=e-1,i=Math.round(checkOK/t.length*100);i>100&&(i=100);var o=unique2Color(i);jQuery("#percent").html('<b style="color:'+o+'">'+i+"% Unique Content </b>"),r==c?(jQuery(".percentimg").fadeOut(),jQuery(".percentimg").css({display:"none"}),jQuery(".percentimg").hide()):(r++,checkMe(e,t,r))})}function countMyWords(){var e=0,t=$("#mycontent").val();return t=$.trim(t),t=t.replace(/\s+/g," "),t=t.replace(/\n /," "),""!=t&&(e=t.split(" ").length),$("#words-count").html(e),e}$("#mycontent").focus(function(){countMyWords()}),$("#mycontent").keypress(function(){countMyWords()}),$("#mycontent").blur(function(){countMyWords()}),$("#mycontent").click(function(){countMyWords()});var arrSegment=new Array,currentCheck=0,checkOK=0;jQuery(document).ready(function(){var e=jQuery("#mycontent").val();e=jQuery.trim(e),""==e&&jQuery("#mycontent").val(placeHolderText),jQuery("#mycontent").focus(function(){jQuery(this).val()==placeHolderText&&jQuery(this).val("")}),jQuery("#mycontent").blur(function(){""==jQuery(this).val()&&jQuery(this).val(placeHolderText),countMyWords()}),jQuery("#checkButton").click(function(){var e=jQuery.trim(jQuery("#mycontent").val());if(jQuery("#mycontent").val()==placeHolderText)return alert("Input Data field can't empty!"),!1;if(e.length<minLimit)return alert("Your article must be "+minLimit+" characters or more"),!1;if(countMyWords()>wordsLimit)return alert("Maximum "+wordsLimit+" words allowed per search"),!1;if($("#capCode").length>0){var t=jQuery.trim($("input[name=scode]").val());if(null==t||""==t)return alert("Image verification field can't empty!"),!1;jQuery.post("../?route=ajax",{capthca:"1",scode:t},function(t){if("1"!=t)return alert("Image verification code is wrong!"),!1;var r=0;jQuery("#mainbox").fadeOut(),jQuery(".percentimg").css({display:"block"}),jQuery(".percentimg").show(),jQuery(".percentimg").fadeIn(),jQuery("#resultList").append("<thead><th>#</th><th>String</th><th>Uniqueness</th></thead><tbody></tbody>"),arrSegment=parseArticle(e),noOfLines=arrSegment.length,checkMe(noOfLines,arrSegment,r)})}else{var r=0;jQuery("#mainbox").fadeOut(),jQuery(".percentimg").css({display:"block"}),jQuery(".percentimg").show(),jQuery(".percentimg").fadeIn(),jQuery("#resultList").append("<thead><th>#</th><th>String</th><th>Uniqueness</th></thead><tbody></tbody>"),arrSegment=parseArticle(e),noOfLines=arrSegment.length,checkMe(noOfLines,arrSegment,r)}})}),$(document).ready(function(){$("#max_wordsLimit").html(wordsLimit),countMyWords()});